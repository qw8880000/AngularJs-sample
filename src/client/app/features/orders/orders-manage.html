<div class="main-inner">
  <div class="main-header main-section">
    <ol class="breadcrumb h5 main-header__title">
      <li class="breadcrumb__item">订单</li>
      <li class="breadcrumb__item breadcrumb__item--active">订单管理</li>
    </ol>
  </div>

  <div class="main-body">
    <!-- search -->
    <ul class="main-search main-section">
      <li class="main-search__item">
        <datepicker-group
            dtp-title="时间范围："
            dtp-show-interval="true"
            dtp-date-start="vm.search.dateStart"
            dtp-date-end="vm.search.dateEnd"></datepicker-group>
      </li>
      <li class="main-search__item">
        <div class="form">
          <label class="form__label" for="orderSn">订单编号：</label>
          <input class="form__control main-search__input"
                 ng-model="vm.search.orderSn"
                 placeholder="请输入订单编号"
                 type="text" name="orderSn" id="orderSn"/>
        </div>
      </li>
      <li class="main-search__item">
        <div class="form">
          <label class="form__label" for="storeName">商家名称：</label>
          <input class="form__control main-search__input"
                 ng-model="vm.search.storeName"
                 placeholder="请输入商家名称"
                 type="text" name="storeName" id="storeName"/>
        </div>
      </li>
      <li class="main-search__item">
        <div class="form">
          <label class="form__label" for="orderState">交易状态：</label>
          <select class="form__control main-search__input"
                  ng-model="vm.search.orderState"
                  ng-options="item as item.name for item in vm.orderStates"
                  id="orderState" name="orderState">
            <option value="" selected>全部</option>
          </select>
        </div>
      </li>
      <li class="main-search__item">
        <div class="form">
          <label class="form__label" for="deliveryMethod">配送方式：</label>
          <select class="form__control main-search__input"
                  ng-model="vm.search.deliveryMethod"
                  ng-options="item as item.name for item in vm.deliveryMethods"
                  id="deliveryMethod" name="deliveryMethod">
            <option value="" selected>全部</option>
          </select>
        </div>
      </li>
      <li class="main-search__item">
        <span class="btn btn-outline--primary" ng-click="vm.searchAction()">
          <i class="fa fa-search" aria-hidden="true"></i>
        </span>
      </li>
    </ul>

    <!-- data table -->
    <div class="main-section">
      <table class="table main-table orders-table">
        <thead>
        <tr>
          <th>商品名称</th>
          <th>数量</th>
          <th>价格(元)</th>
          <th>订单金额</th>
          <th>交易状态</th>
          <th>配送方式</th>
        </tr>
        </thead>
        <tbody ng-repeat="order in vm.orders">
          <tr>
            <td colspan="6" class="orders-info">
              订单编号：{{order.orderSn}}
              下单时间：{{order.addTime | date: "yyyy-MM-dd HH:mm":"GMT+08:00"}}
            </td>
          </tr>

          <tr ng-repeat="good in order.orderGoodses">
            <!--商品信息-->
            <td class="main-good">
              <a href="" class="main-good__pic" ng-click="vm.viewGood(good)"><img ng-src="{{good.goods.goodsCover}}"/></a>
              <span class="main-good__info">
                <a href="" class="link" ng-click="vm.viewGood(good)">{{good.goods.goodsName}}</a>
                <span class="d-block">平台货号：{{good.goods.platformSerial}}</span>
                <span class="d-block">{{good.goods.store.storeName}}</span>
              </span>
            </td>
            <td>{{good.number}}</td>
            <td>{{good.goods.goodsPrice | currency:'￥'}}</td>
            <!--订单信息-->
            <td ng-if="$first">
              <span class="d-block">{{order.orderAmount | currency:'￥'}}</span>
              <span class="d-block">分润费率：{{order.profitSharingRate}}%</span>
            </td>
            <td ng-if="$first">
              <span class="d-block">{{order.orderState.name}}</span>
              <a href="" class="link" ng-click="vm.viewOrder(order)">订单详情</a>
            </td>
            <td ng-if="$first">{{order.deliveryMethods.name}}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- pagination -->
    <pagination class="main-section"
                items-per-page="vm.itemsPerPage"
                total-items="vm.totalItems"
                ng-model="vm.currentPage"
                ng-change="vm.refresh()">
    </pagination>

  </div>
</div>